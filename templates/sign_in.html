<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Acceso | Síntesis</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap");
    :root{
      --s-green:#08916C;
      --s-blue:#00509F;
      --s-coral:#F27267;
      --bg:#F5F7FA;
      --card:#FFFFFF;
      --text:#0F172A;
      --muted:#64748B;
      --border:rgba(15,23,42,.10);
      --shadow: 0 10px 30px rgba(2,6,23,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Space Grotesk", "Segoe UI", Arial, Helvetica, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(8,145,108,.14), transparent 60%),
        radial-gradient(1000px 500px at 90% 20%, rgba(0,80,159,.12), transparent 60%),
        radial-gradient(900px 450px at 70% 95%, rgba(242,114,103,.10), transparent 55%),
        repeating-linear-gradient(45deg, rgba(15,23,42,.03) 0, rgba(15,23,42,.03) 2px, transparent 2px, transparent 10px),
        var(--bg);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 16px;
    }

    .wrap{width:100%; max-width:980px; display:grid; grid-template-columns: 1.2fr 1fr; gap:22px;}
    @media (max-width: 900px){ .wrap{grid-template-columns:1fr; max-width:520px;} }

    .hero{
      border:1px solid var(--border);
      border-radius:18px;
      padding:28px;
      background:linear-gradient(135deg, rgba(255,255,255,.70), rgba(255,255,255,.50));
      backdrop-filter: blur(6px);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background: linear-gradient(90deg, rgba(8,145,108,.22), rgba(0,80,159,.18), rgba(242,114,103,.14));
      filter: blur(28px);
      opacity:.55;
      pointer-events:none;
    }
    .hero > *{position:relative}
    .brand{
      display:flex; align-items:center; gap:12px;
      margin-bottom:18px;
    }
    .brand img{
      height:34px; width:auto;
      display:block;
    }
    .brand .name{
      font-weight:700;
      letter-spacing:.2px;
      font-size:18px;
      line-height:1.1;
    }
    .brand .tag{color:var(--muted); font-size:13px; margin-top:2px}

    h1{
      margin:10px 0 10px;
      font-size:32px;
      letter-spacing:-.4px;
    }
    .lead{margin:0; color:var(--muted); line-height:1.6; max-width:52ch;}

    .pillrow{display:flex; flex-wrap:wrap; gap:8px; margin-top:18px}
    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.75);
      color:#1f2937;
    }

    .card{
      border:1px solid var(--border);
      border-radius:18px;
      background:var(--card);
      box-shadow: var(--shadow);
      padding:22px;
      display:flex;
      flex-direction:column;
      justify-content:center;
    }

    .card h2{
      margin:0 0 6px;
      font-size:18px;
    }
    .small{color:var(--muted); margin:0 0 16px; font-size:13px; line-height:1.5}
    .hint{color:var(--muted); margin:6px 0 14px; font-size:13px; line-height:1.5}

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid rgba(8,145,108,.35);
      background: linear-gradient(180deg, rgba(8,145,108,1), rgba(6,120,90,1));
      color:white;
      font-weight:700;
      text-decoration:none;
      box-shadow: 0 12px 22px rgba(8,145,108,.22), 0 6px 10px rgba(2,6,23,.08);
      transition: transform .2s ease, filter .3s ease, box-shadow .3s ease;
      user-select:none;
      position:relative;
      overflow:hidden;
      isolation:isolate;
      animation: btnPulse 3.2s ease-in-out infinite;
    }
    .btn:before{
      content:"";
      position:absolute;
      inset:-40% -20%;
      background: linear-gradient(120deg, rgba(255,255,255,.08), rgba(255,255,255,.55), rgba(255,255,255,.08));
      transform: translateX(-120%) rotate(8deg);
      opacity:0;
      pointer-events:none;
    }
    .btn:after{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      background: radial-gradient(120px 60px at 20% -10%, rgba(255,255,255,.35), transparent 60%);
      opacity:.7;
      mix-blend-mode: screen;
      z-index:0;
      pointer-events:none;
    }
    .btn span,
    .btn svg{position:relative; z-index:1}
    .btn svg{opacity:.95; transition: transform .2s ease}
    .btn:hover{
      filter:brightness(1.04) saturate(1.05);
      transform: translateY(-2px);
      box-shadow: 0 18px 28px rgba(8,145,108,.30), 0 10px 18px rgba(2,6,23,.10);
    }
    .btn:hover:before{
      animation: btnShimmer 1.1s ease;
      opacity:.9;
    }
    .btn:hover svg{transform: translateX(3px)}
    .btn:active{transform:translateY(1px) scale(.99)}

    @keyframes btnShimmer{
      0%{transform: translateX(-120%) rotate(8deg)}
      100%{transform: translateX(120%) rotate(8deg)}
    }
    @keyframes btnPulse{
      0%,100%{box-shadow: 0 12px 22px rgba(8,145,108,.22), 0 6px 10px rgba(2,6,23,.08)}
      50%{box-shadow: 0 16px 26px rgba(8,145,108,.28), 0 8px 14px rgba(2,6,23,.10)}
    }
    @media (prefers-reduced-motion: reduce){
      .btn{animation:none}
      .btn:before{animation:none}
      .btn:hover svg{transform:none}
    }
    .btn.secondary{
      background:white;
      color:var(--s-blue);
      border-color:rgba(0,80,159,.28);
      box-shadow:none;
      animation:none;
    }
    .btn.secondary:hover{filter:none; transform: translateY(-1px)}

    .field{margin-top:12px}
    .label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    .input{
      width:100%;
      border:1px solid var(--border);
      border-radius:10px;
      padding:10px 12px;
      font-size:14px;
      font-family:inherit;
      outline:none;
      transition:border-color .2s ease, box-shadow .2s ease;
    }
    .input:focus{
      border-color:rgba(0,80,159,.45);
      box-shadow:0 0 0 3px rgba(0,80,159,.12);
    }
    .form-actions{margin-top:14px}
    .alert{
      margin-top:14px;
      padding:10px 12px;
      border-radius:10px;
      background:rgba(242,114,103,.12);
      color:#b42318;
      border:1px solid rgba(242,114,103,.35);
      font-size:12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .closebtn{
      cursor:pointer;
      font-weight:700;
      color:#b42318;
      font-size:16px;
      line-height:1;
    }

    .meta{
      margin-top:14px;
      font-size:12px;
      color:var(--muted);
      text-align:center;
    }
    .meta a{color:var(--s-blue); text-decoration:none}
    .meta a:hover{text-decoration:underline}

    .divider{
      margin:18px 0;
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(15,23,42,.16), transparent);
    }
    .footer{
      margin-top:12px;
      font-size:12px;
      color:rgba(100,116,139,.95);
      text-align:center;
    }
    .footer strong{color:#334155}
    .page-footer{
      margin-top:18px;
      font-size:12px;
      color:var(--muted);
      text-align:center;
    }
    .page-footer a{color:var(--s-blue); text-decoration:none}
    .page-footer a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero" aria-label="Información">
      <div class="brand">
        <!-- Logo público (puedes cambiarlo por uno interno si prefieres) -->
        <img src="https://cuponica.com.bo/sintesis/wp-content/uploads/2025/05/LOGO-SINTESIS.png" alt="Síntesis" />
        <div>
          <div class="name">Síntesis S.A.</div>
          <div class="tag">Acceso corporativo a aplicaciones internas</div>
        </div>
      </div>

      <h1>Inicia sesión para continuar</h1>
      <p class="lead">
        Estás accediendo a una aplicación protegida por Single Sign-On (SSO).
        Usa tu cuenta corporativa para autenticarte y continuar.
      </p>

      <div class="pillrow">
        <span class="pill">SSO / Keycloak</span>
        <span class="pill">Sesión segura</span>
        <span class="pill">Acceso auditado</span>
      </div>

      <div class="divider"></div>
      <p class="lead" style="max-width:64ch">
        Si no tienes acceso, solicita permisos al equipo de TI indicando el nombre de la aplicación y tu usuario.
      </p>
    </section>

    <main class="card" aria-label="Login">
      <h2>Autenticación</h2>
      <p class="small">
        Proveedor: <strong>{{ .ProviderName }}</strong>
      </p>

      {{ if .LogoData }}
      <div class="hint">{{ .LogoData }}</div>
      {{ end }}

      <form method="GET" action="{{ .ProxyPrefix }}/start">
        <input type="hidden" name="rd" value="{{ .Redirect }}">
        {{ if .SignInMessage }}
        <p class="hint">{{ .SignInMessage }}</p>
        {{ end }}
        <button type="submit" class="btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 17l5-5-5-5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4 12h11" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <path d="M15 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Entrar con {{ .ProviderName }}</span>
        </button>
      </form>

      <div class="meta">
        ¿Problemas para entrar? <a href="#" onclick="alert('Contacta a TI con el nombre de la app y tu usuario.');return false;">Contactar soporte</a>
      </div>

      <div class="footer">
        Protegido por <strong>OAuth2 Proxy</strong>
      </div>

      {{ if .CustomLogin }}
      <div class="divider"></div>
      <form method="POST" action="{{ .ProxyPrefix }}/sign_in">
        <input type="hidden" name="rd" value="{{ .Redirect }}">

        <div class="field">
          <label class="label" for="username">Usuario</label>
          <input class="input" type="text" placeholder="usuario@empresa.com" name="username" id="username">
        </div>

        <div class="field">
          <label class="label" for="password">Contraseña</label>
          <input class="input" type="password" placeholder="********" name="password" id="password">
        </div>

        <div class="form-actions">
          <button class="btn secondary" type="submit">Ingresar</button>
        </div>
      </form>
      {{ end }}

      {{ if eq .StatusCode 400 401 }}
      <div class="alert">
        {{ if eq .StatusCode 400 }}
        <span>{{ .StatusCode }}: El usuario no puede estar vacío</span>
        {{ else }}
        <span>{{ .StatusCode }}: Usuario o contraseña inválidos</span>
        {{ end }}
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      </div>
      {{ end }}
    </main>
  </div>

  <script>
    if (window.location.hash) {
      (function() {
        var inputs = document.getElementsByName('rd');
        for (var i = 0; i < inputs.length; i++) {
          var idx = inputs[i].value.indexOf('#');
          if (idx >= 0) {
            inputs[i].value = inputs[i].value.substr(0, idx);
          }
          inputs[i].value += window.location.hash;
        }
      })();
    }
  </script>

  <footer class="page-footer">
    {{ if eq .Footer "-" }}
    {{ else if eq .Footer ""}}
    <p>Protegido por <a href="https://github.com/oauth2-proxy/oauth2-proxy#oauth2_proxy">OAuth2 Proxy</a> versión {{ .Version }}</p>
    {{ else }}
    <p>{{ .Footer }}</p>
    {{ end }}
  </footer>
</body>
</html>
