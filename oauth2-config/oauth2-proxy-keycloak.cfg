# OAuth2 Proxy Configuration for Redis Insight + Keycloak

# Basic Configuration
http_address="0.0.0.0:4180"
upstreams="http://redis-insight:5540"

# Security
# Use (openssl rand -base64 32 | tr -d "=+/" | cut -c1-32) to generate a secure cookie secret
cookie_secret="YOUR_32_BYTE_COOKIE_SECRET_HERE"
cookie_secure="false"  # Change to "true" for HTTPS
email_domains="*"

# Keycloak OIDC
provider="oidc"
client_id="redis-insight-client"
client_secret="YOUR_KEYCLOAK_CLIENT_SECRET"
redirect_url="http://your-server-ip:4180/oauth2/callback"
oidc_issuer_url="https://keycloak.yourdomain.com/realms/your-realm"

# Templates
#custom_templates_dir = "/etc/oauth2-proxy/templates"
#provider_display_name = "SSO Sintesis S.A."

# Role-Based Access Control
#allowed_roles=["REDIS_CLIENT"]

# HTTPS Configuration (uncomment for production)
#https_address="0.0.0.0:44180"
#tls_cert_file="/etc/oauth2-proxy/certs/oauth2-proxy.crt"
#tls_key_file="/etc/oauth2-proxy/certs/oauth2-proxy.key"
#cookie_secure="true"
#redirect_url="https://your-server-ip:44180/oauth2/callback"
